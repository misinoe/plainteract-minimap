!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Minimap=e()}(this,function(){"use strict";var t,e,i=(t=function(t){!function(e){var i=function(t){return r(!0===t,!1,arguments)};i.recursive=function(t){return r(!0===t,!0,arguments)},i.clone=function(t){var e,n,r=t,a=o(t);if("array"===a)for(r=[],n=t.length,e=0;e<n;++e)r[e]=i.clone(t[e]);else if("object"===a){r={};for(e in t)r[e]=i.clone(t[e])}return r};function n(t,e){if("object"!==o(t))return e;for(var i in e)"object"===o(t[i])&&"object"===o(e[i])?t[i]=n(t[i],e[i]):t[i]=e[i];return t}function r(t,e,r){var a=r[0],l=r.length;(t||"object"!==o(a))&&(a={});for(var s=0;s<l;++s){var c=r[s];if("object"===o(c))for(var f in c){var u=t?i.clone(c[f]):c[f];a[f]=e?n(a[f],u):u}}return a}function o(t){return{}.toString.call(t).slice(8,-1).toLowerCase()}e?t.exports=i:window.merge=i}(t&&t.exports)},e=void 0,t(e={exports:{}},e.exports),e.exports),n=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=Math.PI/180;return function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,t);var r=i.recursive(!0,{background:{fillStyle:"rgba(0, 0, 0, 0.5)",strokeStyle:"rgba(0, 0, 0, 0.9)",lineWidth:1},node:{radius:5,fillStyle:"rgba(255, 255, 255, 0.2)",strokeStyle:"rgba(255, 255, 255, 0.5)",lineWidth:1},nodeActive:{radius:5,fillStyle:"rgba(255, 255, 255, 0.5)",strokeStyle:"rgba(255, 255, 255, 0.8)",lineWidth:3},corn:{}},e.style||{});this.style=r;this.canvas=document.createElement("canvas");this.direction=0,this.perspective=90,this.activeName="position001",this.data={width:400,height:300,nodes:[{name:"position001",position:{x:150,y:100}},{name:"position002",position:{x:150,y:130}}]}}return r(t,[{key:"update",value:function(){var t=this.canvas,e=this.data,i=t.getContext("2d"),n=e.width,r=e.height;i.clearRect(1,1,n,r),i.fillStyle=this.style.background.fillStyle,i.fillRect(1,1,n,r);var o=this.style.node.radius,a=e.nodes,l=!0,s=!1,c=void 0;try{for(var f,u=a[Symbol.iterator]();!(l=(f=u.next()).done);l=!0){var d=f.value,h=d.name,v=void 0===h?null:h,y=d.position,p=y.x,b=y.y,g=void 0;this.activeName===v?(this.drawCorn({x:p,y:b,context:i}),g=this.style.nodeActive):g=this.style.node,i.beginPath(),i.fillStyle=g.fillStyle,i.strokeStyle=g.strokeStyle,i.lineWidth=g.lineWidth,i.ellipse(p,b,o,o,0,0,2*Math.PI),i.fill(),i.stroke()}}catch(t){s=!0,c=t}finally{try{!l&&u.return&&u.return()}finally{if(s)throw c}}}},{key:"drawCorn",value:function(t){var e=t.x,i=t.y,n=t.context,r=this.direction*o,a=this.perspective/2*o,l=100*Math.cos(r),s=100*Math.sin(r),c=100*Math.cos(r-a),f=100*Math.sin(r-a),u=100*Math.cos(r+a),d=100*Math.sin(r+a);n.beginPath();var h=n.createRadialGradient(e,i,0,e+l,i+s,100);h.addColorStop(0,"rgba(255, 255, 255, 1.0)"),h.addColorStop(.5,"rgba(255, 255, 255, 0.0)"),n.fillStyle=h,n.moveTo(e,i),n.lineTo(e+c,i+f),n.quadraticCurveTo(e+1.3*l,i+1.3*s,e+u,i+d),n.fill()}}]),t}()});
